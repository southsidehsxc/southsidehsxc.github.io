if (self.CavalryLogger) { CavalryLogger.start_js(["e3qvj"]); }

__d("MessengerGamesQuicksilverPlayerContainerQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"gameID",type:"ID!",defaultValue:null}],j=[{kind:"Variable",name:"id",variableName:"gameID",type:"ID!"}],k={kind:"InlineFragment",type:"Application",selections:[{kind:"LinkedField",alias:"gameInfo",name:"instant_game_info",storageKey:null,args:null,concreteType:"GamesInstantPlayStyleInfo",plural:false,selections:[{kind:"ScalarField",alias:"orientation",name:"game_orientation",args:null,storageKey:null}]}]};return{kind:"Request",operationKind:"query",name:"MessengerGamesQuicksilverPlayerContainerQuery",id:"1727228563959327",text:null,metadata:{},fragment:{kind:"Fragment",name:"MessengerGamesQuicksilverPlayerContainerQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[k]}]},operation:{kind:"Operation",name:"MessengerGamesQuicksilverPlayerContainerQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},k]}]}}}();f.exports=h}),null);
__d("MessengerGameListRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="MessengerGameListRoute";j.queries={gameList:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"InstantGamesListInputParams!"},name:"input",value:{kind:"CallVariable",callVariableName:"input"}}],children:[].concat.apply([],[c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"instant_games_list",kind:"Query",metadata:{identifyingArgName:"input",identifyingArgType:"InstantGamesListInputParams!"},name:"MessengerGameListRoute",type:"InstantGamesListResult"}}(l.getFragment("gameList"))}};j.paramDefinitions={input:{type:"InstantGamesListInputParams!",required:true}};f.exports=j}),null);
__d("GamesInstantPlaySupportedOrientation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PORTRAIT:"portrait",LANDSCAPE:"landscape",PORTRAIT_LANDSCAPE:"portrait_landscape",RESPONSIVE:"responsive"})}),null);
__d("MessengerGamesQuicksilverPlayerContainer.react",["Arbiter","GamesInstantPlaySupportedOrientation","GamesQuicksilverAnalyticsInfo","GamesQuicksilverFunnelLogger","GamesQuicksilverPlayer.react","InstantGamesGateKeepers","MessengerMobileWindow.react","React","RelayFBEnvironment","RelayModern","XUISpinner.react","idx","MessengerGamesQuicksilverPlayerContainerQuery.graphql"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k=c("GamesQuicksilverFunnelLogger").getDefaultFunnelName,l=c("React").PropTypes,m=c("RelayModern").QueryRenderer,n=c("RelayModern").graphql;i=babelHelpers.inherits(o,c("React").PureComponent);j=i&&i.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={open:true},this.$MessengerGamesQuicksilverPlayerContainer2=function(){this.setState({open:false})}.bind(this),q}o.prototype.componentDidMount=function(){this.$MessengerGamesQuicksilverPlayerContainer1=c("Arbiter").subscribeOnce(["instant_games_quit"],this.$MessengerGamesQuicksilverPlayerContainer2)};o.prototype.componentWillUnmount=function(){if(this.$MessengerGamesQuicksilverPlayerContainer1===null)return;c("Arbiter").unsubscribe(this.$MessengerGamesQuicksilverPlayerContainer1)};o.prototype.render=function(){__p&&__p();if(c("InstantGamesGateKeepers").messenger_dot_com_instant_games_disabled)return null;var p=this.props,q=p.contextSourceID,r=p.contextType,s=p.entryPointData,t=p.gameID,u=p.onHide,v=p.source,w=p.sourceID,x=p.invitationID;return c("React").createElement(m,{environment:c("RelayFBEnvironment"),query:h||(h=function h(){return c("MessengerGamesQuicksilverPlayerContainerQuery.graphql")}),render:function(y){var z=y.error,A=y.props;if(A){var B,C=(B=A)!=null?(B=B.node)!=null?(B=B.gameInfo)!=null?B.orientation:B:B:B;C=C&&Object.prototype.hasOwnProperty.call(c("GamesInstantPlaySupportedOrientation"),C)?c("GamesInstantPlaySupportedOrientation")[C]:c("GamesInstantPlaySupportedOrientation").PORTRAIT;return c("React").createElement(c("MessengerMobileWindow.react"),{background:"dark",fontSize:"fixed",onHide:u,onClose:u,open:this.state.open,orientation:C},c("React").createElement(c("GamesQuicksilverPlayer.react"),{analyticsInfo:new(c("GamesQuicksilverAnalyticsInfo"))(k(),v,w||"",x),appId:t,autoplay:true,blockMobileScroll:false,contextSourceID:q,contextType:r,enabled:true,entryPointData:s,matchPlayer:false}))}return c("React").createElement(c("XUISpinner.react"),{background:"dark"})}.bind(this),variables:{gameID:this.props.gameID}})};o.propTypes={contextSourceID:l.string,contextType:l.string.isRequired,entryPointData:l.string,gameID:l.string.isRequired,onHide:l.func.isRequired,source:l.string.isRequired,sourceID:l.string,invitationID:l.string};f.exports=o}),null);
__d("MessengerGamesSearchSource",["AbstractSearchSource","SearchableEntry"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractSearchSource"));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$MessengerGamesSearchSource1=k}j.prototype.searchImpl=function(k,l,m){__p&&__p();var n=[];for(var o in this.$MessengerGamesSearchSource1){var p=0;for(var q=0;q<o.length;q++){if(p==k.length)break;if(k.toLowerCase()[p]==o.toLowerCase()[q])p++}if(p==k.length)n.push(new(c("SearchableEntry"))({uniqueID:this.$MessengerGamesSearchSource1[o],title:o}))}l(n,k)};f.exports=j}),null);
__d("MessengerGamesList.react",["cx","fbt","GamesQuicksilverFunnelLogger","InstantGameContextType","QuicksilverSources","messengerButtonReact","messengerDialogsRe","MessengerGamesQuicksilverPlayerContainer.react","MessengerGamesSearchSource","messengerProfileImageWrapperReact","MessengerScrollableArea.react","Image.react","React","RelayClassic","react-relay/classic/query/RelayQL","SearchableTextInput.react","Set"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerButtonReact").jsComponent,m=c("messengerProfileImageWrapperReact").jsComponent,n=c("React").PropTypes,o=40,p="NEW";j=babelHelpers.inherits(q,c("React").PureComponent);k=j&&j.prototype;function q(t){__p&&__p();k.constructor.call(this,t);this.$MessengerGamesList3=function(v){this.setState({queryString:v.target.value})}.bind(this);this.$MessengerGamesList4=function(v,w){var x=new(c("Set"))(v.map(function(y){return y.getUniqueID()}));this.setState({matchingGames:x})}.bind(this);this.$MessengerGamesList9=function(){c("messengerDialogsRe").removeAllDialogs();this.setState({playerOpen:false})}.bind(this);var u={};this.props.gameList.items.nodes.map(function(v){v.games.edges.map(function(w){u[w.node.application.name]=w.node.application.id})});this.$MessengerGamesList1=new(c("MessengerGamesSearchSource"))(u);this.state={matchingGames:new(c("Set"))(Object.values(u).map(function(v){return String(v)})),playerOpen:false,queryString:""}}q.prototype.componentDidMount=function(){c("GamesQuicksilverFunnelLogger").logGameListShow(c("GamesQuicksilverFunnelLogger").getDefaultFunnelName())};q.prototype.render=function(){return c("React").createElement(c("MessengerScrollableArea.react"),{width:285,height:this.$MessengerGamesList2()+"px",className:"_3rh0"},c("React").createElement(c("SearchableTextInput.react"),{className:"_26ly",searchSource:this.$MessengerGamesList1,queryString:this.state.queryString,onChange:this.$MessengerGamesList3,onEntriesFound:this.$MessengerGamesList4,placeholder:i._("Search for game..."),ref:function t(u){return u&&u.focusInput()}}),this.props.gameList.items.nodes.map(function(t,u){return c("React").createElement("div",{key:"game-section-"+u},this.$MessengerGamesList5(t))}.bind(this)))};q.prototype.$MessengerGamesList5=function(t){__p&&__p();var u=[];for(var v=t.games.edges,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var y;if(w){if(x>=v.length)break;y=v[x++]}else{x=v.next();if(x.done)break;y=x.value}var z=y;if(this.state.matchingGames.has(z.node.application.id))u.push(z)}if(u.length===0)return null;return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement("h4",{className:"_4lh7"},t.title.text,t.is_badged?c("React").createElement("div",{className:"_4lh6"}):null)),c("React").createElement("ul",{className:"_4lh2"},u.map(function(z){return this.$MessengerGamesList6(z)}.bind(this))))};q.prototype.$MessengerGamesList6=function(t){var u=t.node,v=u.application.instant_game_info.icon_uri,w=u.tags&&u.tags.indexOf(p)>=0?c("React").createElement("span",{className:"_4lh8 _43by"},i._("NEW")):null;return c("React").createElement("li",{key:"game-"+u.application.id,className:"_4lh9",onClick:this.$MessengerGamesList7.bind(this,u.application.id),role:"button"},c("React").createElement(m,{size:o,showBadge:false},c("React").createElement(c("Image.react"),{height:o,src:v,width:o})),c("React").createElement("div",{className:"_4lha"},c("React").createElement("div",null,c("React").createElement("span",{className:"_4lhb"},u.application.name),w),u.text_lines.map(function(x,y){return c("React").createElement("div",{key:y,className:"_4lhc"},x.text)})),c("React").createElement(l,{customColor:true,label:i._("PLAY"),type:"primary",use:"default",className:"_4lhd",tabIndex:0}))};q.prototype.$MessengerGamesList8=function(t){var u=this.props.threadFBID?c("InstantGameContextType").THREAD:c("InstantGameContextType").SOLO,v=this.props.threadFBID;return c("React").createElement(c("MessengerGamesQuicksilverPlayerContainer.react"),{contextSourceID:v,contextType:u,gameID:t,onHide:this.$MessengerGamesList9,source:c("QuicksilverSources").MESSENGER_COMPOSER,sourceID:this.props.threadFBID})};q.prototype.$MessengerGamesList2=function(){var t=this.props.gameList.items.count,u=this.props.gameList.items.nodes.reduce(function(v,w){return v+w.games.count},0);return t*30+u*62};q.prototype.$MessengerGamesList7=function(t){if(this.state.playerOpen)return;c("messengerDialogsRe").showDialog(function(){return this.$MessengerGamesList8(t)}.bind(this));this.setState({playerOpen:true});c("GamesQuicksilverFunnelLogger").logGameSelect(c("GamesQuicksilverFunnelLogger").getDefaultFunnelName())};q.propTypes={gameList:n.object.isRequired,threadFBID:n.string.isRequired};var r=function(){return{children:[{fieldName:"tags",kind:"Field",metadata:{isPlural:true},type:"InstantGameListItemTag"},{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"text_lines",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"TextWithEntities"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"icon_uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"instant_game_info",kind:"Field",metadata:{canHaveSubselections:true},type:"GamesInstantPlayStyleInfo"}],fieldName:"application",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Application"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerGamesList_reactRelayQL",type:"InstantGameListGameItem"}}(),s=function(t){return{children:[{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"title",kind:"Field",metadata:{canHaveSubselections:true},type:"TextWithEntities"},{fieldName:"is_badged",kind:"Field",metadata:{},type:"Boolean"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:100}}],children:[{fieldName:"count",kind:"Field",metadata:{},type:"Int"},{children:[{children:[].concat.apply([],[c("react-relay/classic/query/RelayQL").__frag(t)]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,isRequisite:true},type:"InstantGameListGameItem"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"InstantGameListGamesSectionGameEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"games",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true},type:"InstantGameListGamesSectionGameConnection"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerGamesList_reactRelayQL",type:"InstantGameListGamesSection"}}(r);f.exports=c("RelayClassic").createContainer(q,{fragments:{gameList:function t(){return function(u,v){return{children:[{children:[{fieldName:"count",kind:"Field",metadata:{},type:"Int"},{children:[].concat.apply([],[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},c("react-relay/classic/query/RelayQL").__frag(u),c("react-relay/classic/query/RelayQL").__frag(v)]),fieldName:"nodes",kind:"Field",metadata:{canHaveSubselections:true,isAbstract:true,isPlural:true},type:"InstantGameListItem"}],fieldName:"items",kind:"Field",metadata:{canHaveSubselections:true},type:"InstantGamesListResultGameListItemConnection"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerGamesList_react_GameListRelayQL",type:"InstantGamesListResult"}}(r,s)}}})}),null);
__d("MessengerGamesFlyout.react",["MessengerGameListRoute","MessengerGamesList.react","React","RelayClassic"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("RelayClassic").RootContainer,k=c("React").PropTypes;h=babelHelpers.inherits(l,c("React").PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.renderLoading=function(){return this.props.placeholder}.bind(this),this.renderPlayer=function(r){return c("React").createElement(c("MessengerGamesList.react"),babelHelpers["extends"]({},r,{threadFBID:this.props.threadFBID}))}.bind(this),n}l.prototype.render=function(){return c("React").createElement(j,{Component:c("MessengerGamesList.react"),route:new(c("MessengerGameListRoute"))({input:{key:{thread_id:this.props.threadFBID},query:{surface:"COMPOSER_LIST"}}}),renderLoading:this.renderLoading,renderFetched:this.renderPlayer,renderFailure:this.renderFailure})};l.prototype.renderFailure=function(){return fbt._("Couldn't load game list")};l.propTypes={threadFBID:k.string.isRequired};f.exports=l}),null);